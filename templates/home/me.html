{% load static %}

<!-- Hero Profile Card Wrapper -->
<!-- Overflow visible to allow Degu to sit on top edge -->
<div class="col-span-12 relative h-[500px] z-10 transition-transform duration-500 hover:scale-[1.01]">

  <!-- TARS PATROL SYSTEM (PURE CSS MONOLITH) -->
  <!-- Positioned strictly ABOVE the card (Top -35px) -->
  <div id="tars-patrol" class="absolute top-[-35px] left-0 w-full h-[35px] z-[60] pointer-events-none overflow-visible">
      
      <!-- BLACK HOLES (Gargantua Style) -->
      
      <!-- Entry Gate (Left) - Appearance Point -->
      <div id="bh-entry" class="absolute top-1/2 left-[10%] -translate-x-1/2 -translate-y-1/2 w-12 h-12 z-0">
           <div class="relative w-full h-full flex items-center justify-center">
               <!-- Vertical Halo -->
               <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-orange-600 via-yellow-100 to-orange-600 opacity-60 blur-[4px]"></div>
               <!-- Event Horizon -->
               <div class="absolute w-[70%] h-[70%] bg-black rounded-full z-10 shadow-[inset_0_0_12px_#ea580c]"></div>
               <!-- Accretion Disk -->
               <div class="absolute w-[220%] h-[220%] rounded-full z-20 opacity-80 mix-blend-screen" 
                    style="background: radial-gradient(transparent 45%, rgba(253, 224, 71, 0.8) 50%, rgba(234, 88, 12, 0.6) 60%, transparent 70%); transform: rotateX(76deg);"></div>
           </div>
      </div>
           
      <!-- Exit Gate (Right) - Departure Point -->
      <div id="bh-exit" class="absolute top-1/2 left-[85%] -translate-x-1/2 -translate-y-1/2 w-12 h-12 z-0">
           <div class="relative w-full h-full flex items-center justify-center">
               <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-orange-600 via-yellow-100 to-orange-600 opacity-60 blur-[4px]"></div>
               <div class="absolute w-[70%] h-[70%] bg-black rounded-full z-10 shadow-[inset_0_0_12px_#ea580c]"></div>
               <div class="absolute w-[220%] h-[220%] rounded-full z-20 opacity-80 mix-blend-screen" 
                    style="background: radial-gradient(transparent 45%, rgba(253, 224, 71, 0.8) 50%, rgba(234, 88, 12, 0.6) 60%, transparent 70%); transform: rotateX(76deg);"></div>
           </div>
      </div>

      <!-- TARS Unit (Compact) -->
      <!-- 'tars-teleport-loop' handles Walk -> Teleport -> Reset -->
      <div id="tars-unit" class="absolute bottom-0 left-0 w-7 h-11 will-change-transform origin-center pointer-events-auto cursor-crosshair transition-filter duration-200 hover:brightness-110 z-10" 
           style="animation: tars-teleport-loop 20s infinite linear;">
           
          <!-- Inner Body: Mechanic Walk -->
          <div id="tars-body" class="w-full h-full flex gap-[1px] shadow-2xl origin-bottom" style="animation: tars-mechanic-walk 2.5s infinite ease-in-out;">
              
              <!-- SLAB 1 (Outer Left) -->
              <div class="slab-outer w-1/4 h-full bg-gradient-to-b from-slate-300 via-slate-400 to-slate-500 rounded-[1px] border-[0.5px] border-slate-500/50 flex flex-col items-center justify-between py-1"
                   style="animation: piston-outer 2.5s infinite ease-in-out;">
                  <div class="w-full h-full border-r border-slate-400/30 bg-[linear-gradient(90deg,transparent_50%,rgba(0,0,0,0.05)_50%)] bg-[length:4px_4px]"></div>
              </div>
              
              <!-- SLAB 2 (Inner Left - Logo & Screen) -->
              <div class="slab-inner w-1/4 h-full bg-gradient-to-b from-slate-200 via-slate-300 to-slate-400 rounded-[1px] border-[0.5px] border-slate-500/50 relative overflow-hidden"
                   style="animation: piston-inner 2.5s infinite ease-in-out;">
                   
                   <div class="absolute top-2 left-[10%] w-[80%] h-3 bg-black rounded-[1px] border border-slate-500 overflow-hidden">
                       <div class="w-full h-full bg-green-900/50 flex flex-col gap-[1px] p-[1px]">
                           <div class="w-[80%] h-[1px] bg-green-400 opacity-80"></div>
                           <div class="w-[60%] h-[1px] bg-green-400 opacity-80"></div>
                           <div class="w-[90%] h-[1px] bg-green-400 opacity-80"></div>
                       </div>
                   </div>

                   <div class="absolute top-6 left-[20%] text-[4px] font-bold text-slate-600 tracking-tighter rotate-90 origin-left opacity-80">
                       TARS
                   </div>
                   
                   <div class="absolute top-8 right-[20%] flex flex-col gap-[1px]">
                       <div class="flex gap-[1px]">
                          <div class="w-[1px] h-[1px] bg-slate-700 rounded-full"></div>
                          <div class="w-[1px] h-[1px] bg-slate-700 rounded-full"></div>
                       </div>
                       <div class="flex gap-[1px]">
                          <div class="w-[1px] h-[1px] bg-slate-700 rounded-full"></div>
                       </div>
                   </div>
              </div>
              
              <!-- SLAB 3 (Inner Right - Screen & Eye) -->
              <div class="slab-inner w-1/4 h-full bg-gradient-to-b from-slate-200 via-slate-300 to-slate-400 rounded-[1px] border-[0.5px] border-slate-500/50 relative overflow-hidden"
                   style="animation: piston-inner 2.5s infinite ease-in-out;">
                   
                   <div class="absolute top-2 left-[10%] w-[80%] h-3 bg-black rounded-[1px] border border-slate-500 overflow-hidden">
                       <div class="w-full h-full bg-green-900/50 flex flex-col gap-[1px] p-[1px]">
                           <div class="w-[90%] h-[1px] bg-green-400 opacity-80"></div>
                           <div class="w-[50%] h-[1px] bg-green-400 opacity-80"></div>
                           <div class="w-[70%] h-[1px] bg-green-400 opacity-80"></div>
                       </div>
                   </div>
                   <div id="tars-eye" class="absolute top-[22px] left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-red-600 rounded-full shadow-[0_0_2px_red]"></div>
              </div>
              
              <!-- SLAB 4 (Outer Right) -->
              <div class="slab-outer w-1/4 h-full bg-gradient-to-b from-slate-300 via-slate-400 to-slate-500 rounded-[1px] border-[0.5px] border-slate-500/50"
                   style="animation: piston-outer 2.5s infinite ease-in-out;">
                   <div class="w-full h-full border-r border-slate-400/30 bg-[linear-gradient(90deg,transparent_50%,rgba(0,0,0,0.05)_50%)] bg-[length:4px_4px]"></div>
              </div>
              
          </div>
      </div>
  </div>

  <!-- Inner Card (Background & Content) -->
  <div class="relative w-full h-full overflow-hidden rounded-[2rem] bg-[#1c1c1e] text-white p-8 md:p-12 shadow-2xl flex flex-col justify-center">
      
      <!-- Content Container -->
      <div class="relative z-10 max-w-2xl flex flex-col h-full justify-between">
        
        <!-- Header/Eyebrow -->
        <div class="animate-fade-in delay-100">
          <h3 class="text-xs font-bold tracking-[0.2em] text-gray-400 uppercase mb-2">CTO & Technical Lead â€¢ Software Craftsman</h3>
          <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-white mb-4 leading-tight">
            Building <br/>
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">Scalable Solutions.</span>
          </h1>
          <p class="text-lg text-gray-400 max-w-lg leading-relaxed mb-6">
            Co-founder at <a href="https://valerdat.com" target="_blank" class="text-white font-semibold hover:underline decoration-white/30 underline-offset-4 transition-all hover:text-blue-400 hover:decoration-blue-400">Valerdat</a>. 
            Architecting complex solutions for Supply Chain and Procurement. 
            Proven track record leading critical developments, such as the strategic planning platform for <a href="https://www.inditex.com" target="_blank" class="text-white font-semibold hover:underline decoration-white/30 underline-offset-4 transition-all hover:text-blue-400 hover:decoration-blue-400">Inditex's</a> Security Department.
          </p>
        </div>
    
        <!-- Actions -->
        <div class="flex flex-wrap gap-4 animate-fade-in delay-200">
          <a href="https://linkedin.com/in/zabbix-byte" 
             class="inline-flex items-center px-6 py-3 rounded-full bg-white text-black font-semibold text-sm hover:bg-gray-100 transition-colors">
            <i class="fab fa-linkedin-in mr-2"></i> Connect
          </a>
          <a href="https://github.com/zabbix-byte" 
             class="inline-flex items-center px-6 py-3 rounded-full bg-[#2c2c2e] text-white font-semibold text-sm hover:bg-[#3a3a3c] transition-colors border border-gray-700">
            <i class="fab fa-github mr-2"></i> GitHub
          </a>
          <div class="flex items-center px-4 py-2 rounded-full bg-[#2c2c2e]/50 backdrop-blur-md border border-gray-700/50 text-xs font-medium text-gray-300">
             <span class="relative flex h-2 w-2 mr-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
              </span>
              Barcelona, Spain
          </div>
        </div>
    
      </div>
    
      <!-- Hero Image (Right/Background) -->
      <div class="absolute top-0 right-0 h-full w-1/2 md:w-[45%] lg:w-[40%] overflow-hidden">
        <div class="relative w-full h-full">
            <!-- Glow effect behind image -->
            <div class="absolute top-1/2 right-1/2 transform translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-gradient-to-tr from-blue-500/10 to-purple-500/10 blur-[80px] rounded-full"></div>
            <img 
                src="{% static 'img/profile-picture.jpeg' %}?v=3" 
                alt="Vasile Ovidiu Ichim"
                class="w-full h-full object-cover object-center mask-image-gradient"
                style="mask-image: linear-gradient(to right, transparent 0%, black 20%, black 100%); -webkit-mask-image: linear-gradient(to right, transparent 0%, black 20%, black 100%);"
            />
            <!-- Overlay gradient for extra blending -->
            <div class="absolute inset-0 bg-gradient-to-r from-[#1c1c1e] via-transparent to-transparent"></div>
        </div>
      </div>
    
      <!-- Background Texture -->
      <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-[#1c1c1e] to-black -z-10"></div>
  
  </div>

  <style>
      /* 1. X Movement: Teleport Loop (Start from Inside) */
      @keyframes tars-teleport-loop {
          /* 0-10%: Entry Hole Opens, TARS Emerges */
          0% { left: 10%; transform: scale(0) rotate(360deg); opacity: 0; }
          5% { left: 10%; transform: scale(1) rotate(0deg); opacity: 1; }
          10% { left: 10%; transform: scale(1) rotate(0deg); opacity: 1; }
          
          /* 10-80%: Patrol Walk - Now covers more distance */
          80% { left: 85%; transform: scale(1) rotate(0deg); opacity: 1; }
          
          /* 80-90%: Exit Hole Opens, TARS Departs */
          85% { left: 85%; transform: scale(0) rotate(-360deg); opacity: 0; }
          90% { left: 85%; transform: scale(0); opacity: 0; }
          
          /* 90-100%: Hidden Reset */
          100% { left: 10%; transform: scale(0); opacity: 0; }
      }
      
      /* Black Hole Animations */
      #bh-exit {
          animation: bh-exit-anim 20s infinite linear !important;
      }
      #bh-entry {
          animation: bh-entry-anim 20s infinite linear !important;
      }

      /* Entry Hole: Open 0-10% */
      @keyframes bh-entry-anim {
          0% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
          2% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
          10% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
          100% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
      }

      /* Exit Hole: Open 80-90% */
      @keyframes bh-exit-anim {
          0%, 78% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
          80% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
          90% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
          100% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
      }


      /* 2. Body Movement: Improved Realistic Walk */
      /* More pronounced tilt and vertical bounce for mechanical stepping */
      @keyframes tars-mechanic-walk {
          0%   { transform: rotate(0deg) translateY(0); }
          12%  { transform: rotate(-7deg) translateY(-2px); } /* Lean back, lift */
          25%  { transform: rotate(-5deg) translateY(0); }     /* Step down */
          37%  { transform: rotate(0deg) translateY(0); }      /* Center */
          50%  { transform: rotate(7deg) translateY(-2px); }   /* Lean forward, lift */
          62%  { transform: rotate(5deg) translateY(0); }      /* Step down */
          75%  { transform: rotate(0deg) translateY(0); }      /* Center */
          87%  { transform: rotate(-7deg) translateY(-2px); }  /* Lean back again */
          100% { transform: rotate(0deg) translateY(0); }      /* Complete cycle */
      }

      /* 3. Pistons: More Natural Stepping Motion */
      @keyframes piston-outer {
          0%   { transform: translateY(0); }
          10%  { transform: translateY(-5px); } /* Lift higher */
          20%  { transform: translateY(-4px); } /* Hold */
          30%  { transform: translateY(0); }    /* Step down */
          100% { transform: translateY(0); }
      }
      @keyframes piston-inner {
          0%   { transform: translateY(0); }
          40%  { transform: translateY(0); }
          50%  { transform: translateY(-5px); } /* Lift higher */
          60%  { transform: translateY(-4px); } /* Hold */
          70%  { transform: translateY(0); }    /* Step down */
          100% { transform: translateY(0); }
      }
      
      .laser-beam {
          position: absolute;
          height: 2px;
          background-color: #ff0000;
          box-shadow: 0 0 8px #ff0000, 0 0 12px #ff4444;
          z-index: 100;
          transform-origin: left center;
          pointer-events: none;
          animation: laser-shot 0.4s ease-out forwards;
      }
      @keyframes laser-shot {
           0% { width: 0; opacity: 1; }
           20% { width: 100vw; opacity: 1; }
           100% { width: 100vw; opacity: 0; }
      }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tarsUnit = document.getElementById('tars-unit');
        const patrolArea = document.getElementById('tars-patrol');

        tarsUnit.addEventListener('click', (e) => {
            // Visual Recoil
            tarsUnit.style.transition = 'transform 0.1s';
            tarsUnit.style.transform = 'translateY(-5px) scale(0.9)';
            setTimeout(() => {
                tarsUnit.style.transform = '';
            }, 100);

            // Create Laser
            const eye = document.getElementById('tars-eye');
            const rect = eye.getBoundingClientRect();
            
            const laser = document.createElement('div');
            laser.classList.add('laser-beam');
            
            // Calculate Position relative to patrol area (since it's the parent)
            // But patrol area is relative. Let's append to Body for absolute safety or patrol area?
            // Appending to body is best for full screen shot
            document.body.appendChild(laser);
            
            const startX = rect.left + rect.width/2;
            const startY = rect.top + rect.height/2;
            
            laser.style.top = startY + 'px';
            laser.style.left = startX + 'px';
            
            // Random Angle downwards or towards center
            // Simple: Shoot left or right depending on where he is relative to center
            const isRightSide = startX > window.innerWidth / 2;
            const rotation = isRightSide ? 160 + Math.random()*40 : -20 + Math.random()*40; // Shoot inwards generally
            
            // Override with mouse click? 
            // "Dispare un rallo laser" - Shoot at the click? 
            // Since click is ON Tars, let's shoot randomly outwards "cool factor".
            
            laser.style.transform = `rotate(${rotation}deg)`;
            
            // Cleanup
            setTimeout(() => {
                laser.remove();
            }, 500);
        });
    });
  </script>
</div>
